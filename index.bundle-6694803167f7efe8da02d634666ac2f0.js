webpackJsonp([0],{0:function(t,e,s){"use strict";function o(){var t=new Date,e=t.getHours(),s=t.getMinutes(),o=t.getSeconds();return(e<10?"0"+e:e)+":"+(s<10?"0"+s:s)+":"+(o<10?"0"+o:o)}var n=this&&this.__extends||function(t,e){function s(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)},a=this&&this.__decorate||function(t,e,s,o){var n,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,s,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(i=(a<3?n(i):a>3?n(e,s,i):n(e,s))||i);return a>3&&i&&Object.defineProperty(e,s,i),i},i=s(1),r=s(2),l=s(6),c=s(17);new c(".clipboard");var d,u=new l.Decoder,p=new l.Decoder,m=localStorage.getItem("parameters"),h=localStorage.getItem("bookmarks"),b="CONNECT\nlogin:admin\npasscode:admin\naccept-version:1.2,1.1,1.0\nheart-beat:0,0\n\n\0",g="SUBSCRIBE\nid:sub-0\ndestination:/topic/test_topic\n\n\0",f="SEND\ndestination:/queue/test\ncontent-type:text/plain\n\nhello queue test\n\0",v=function(t){function e(){var e=t.apply(this,arguments)||this;return e.websocket=null,e.messages=[],e.isSocketIOInternally=!!localStorage.getItem("isSocketIO"),e.ignorePingInternally=!!localStorage.getItem("ignorePing"),e.baseUrl=localStorage.getItem("baseUrl")||"ws://slack.socket.io/socket.io/",e.parameters=m?JSON.parse(m):[{key:"transport",value:"websocket"}],e.anchor=localStorage.getItem("anchor")||"",e.messageInternally=localStorage.getItem("message")||'42["new message",{"username":"hello","message":"world"}]',e.showRawInternally=!!localStorage.getItem("showRaw"),e.showFormattedInternally=!!localStorage.getItem("showFormatted"),e.previewResult="",e.isPreview=!1,e.bookmarks=h?JSON.parse(h):[],e.isEditing=!1,e.bookmarkName="",e.subprotocolInternally=localStorage.getItem("subprotocol")||"",e.filter="",e.filterIsHidden=!0,e.stompIsHidden=!0,e}return n(e,t),Object.defineProperty(e.prototype,"filteredMessages",{get:function(){var t=this;return this.messages.filter(function(e){return!t.filter||("string"==typeof e.rawData&&e.rawData.indexOf(t.filter)!==-1||"string"==typeof e.moment&&e.moment.indexOf(t.filter)!==-1||"string"==typeof e.formattedData&&e.formattedData.indexOf(t.filter)!==-1||"string"==typeof e.type&&e.type.indexOf(t.filter)!==-1||"string"==typeof e.reason&&e.reason.indexOf(t.filter)!==-1||"string"==typeof e.data&&e.data.indexOf(t.filter)!==-1||"string"==typeof e.tips&&e.tips.indexOf(t.filter)!==-1)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subprotocol",{get:function(){return this.subprotocolInternally},set:function(t){localStorage.setItem("subprotocol",t),this.subprotocolInternally=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canSaveAsBookmark",{get:function(){if(""===this.bookmarkName.trim())return!1;for(var t=0,e=this.bookmarks;t<e.length;t++){var s=e[t];if(s.name===this.bookmarkName)return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSocketIO",{get:function(){return this.isSocketIOInternally},set:function(t){localStorage.setItem("isSocketIO",t?"1":""),this.isSocketIOInternally=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorePing",{get:function(){return this.ignorePingInternally},set:function(t){localStorage.setItem("ignorePing",t?"1":""),this.ignorePingInternally=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showRaw",{get:function(){return this.showRawInternally},set:function(t){localStorage.setItem("showRaw",t?"1":""),this.showRawInternally=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showFormatted",{get:function(){return this.showFormattedInternally},set:function(t){localStorage.setItem("showFormatted",t?"1":""),this.showFormattedInternally=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.messageInternally},set:function(t){localStorage.setItem("message",t),this.messageInternally=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){var t=this.baseUrl;if(this.parameters.length>0){t+="?";for(var e=0,s=this.parameters;e<s.length;e++){var o=s[e];t+=o.key+"="+o.value+"&"}t=t.substring(0,t.length-1)}return this.anchor&&(t+="#"+this.anchor),t},set:function(t){var e=t.indexOf("#");if(e>-1?(t=t.substring(0,e),this.anchor=t.substring(e+1)):this.anchor="",e=t.indexOf("?"),e>-1){this.baseUrl=t.substring(0,e);for(var s=t.substring(e+1).split("&"),o=[],n=0,a=s;n<a.length;n++){var i=a[n];e=i.indexOf("="),e===-1?o.push({key:i,value:""}):o.push({key:i.substring(0,e),value:i.substring(e+1)})}this.parameters=o}else this.baseUrl=t,this.parameters=[];localStorage.setItem("baseUrl",this.baseUrl),localStorage.setItem("parameters",JSON.stringify(this.parameters)),localStorage.setItem("anchor",this.anchor)},enumerable:!0,configurable:!0}),e.prototype.savingAsBookmark=function(){this.isEditing=!this.isEditing,i.nextTick(function(){var t=document.getElementById("bookmarkName");t&&t.focus()})},e.prototype.toggleFilter=function(){this.filterIsHidden=!this.filterIsHidden,i.nextTick(function(){var t=document.getElementById("filter");t&&t.focus()})},e.prototype.toggleStomp=function(){this.stompIsHidden=!this.stompIsHidden},e.prototype.saveAsBookmark=function(){this.isEditing=!1,this.bookmarks.unshift({name:this.bookmarkName,isSocketIO:this.isSocketIO,ignorePing:this.ignorePing,baseUrl:this.baseUrl,parameters:this.parameters,anchor:this.anchor,message:this.message,showRaw:this.showRaw,showFormatted:this.showFormatted}),localStorage.setItem("bookmarks",JSON.stringify(this.bookmarks))},e.prototype.deleteBookmark=function(t){this.bookmarks.splice(t,1),localStorage.setItem("bookmarks",JSON.stringify(this.bookmarks))},e.prototype.useBookmark=function(t){var e=this.bookmarks[t];this.isSocketIO=e.isSocketIO,this.ignorePing=e.ignorePing,this.showRaw=e.showRaw,this.showFormatted=e.showFormatted,this.message=e.message,this.baseUrl=e.baseUrl;var s=JSON.stringify(e.parameters);this.parameters=JSON.parse(s),this.anchor=e.anchor,localStorage.setItem("baseUrl",e.baseUrl),localStorage.setItem("parameters",s),localStorage.setItem("anchor",e.anchor)},e.prototype.setKeyOfParameter=function(t,e){this.parameters[t].key=e.target.value,localStorage.setItem("parameters",JSON.stringify(this.parameters))},e.prototype.setValueOfParameter=function(t,e){this.parameters[t].value=e.target.value,localStorage.setItem("parameters",JSON.stringify(this.parameters))},e.prototype.deleteParameter=function(t){this.parameters.splice(t,1),localStorage.setItem("parameters",JSON.stringify(this.parameters))},e.prototype.addParameter=function(){this.parameters.push({key:"",value:""})},e.prototype.connect=function(){try{this.subprotocol?this.websocket=new WebSocket(this.url,this.subprotocol):this.websocket=new WebSocket(this.url)}catch(t){return void this.messages.unshift({moment:o(),type:"error",reason:t.message})}this.websocket.onopen=this.onopen,this.websocket.onclose=this.onclose,this.websocket.onmessage=this.onmessage,this.websocket.onerror=this.onerror,this.isSocketIO&&(d=setInterval(this.ping,25e3))},e.prototype.sendMessage=function(){this.send(this.message)},e.prototype.useStompConnectionMessage=function(){this.message=b},e.prototype.useStompSubscriptionMessage=function(){this.message=g},e.prototype.useStompSendMessage=function(){this.message=f},e.prototype.send=function(t){this.websocket&&(this.ignorePing&&"2"===t||this.messages.unshift({moment:o(),type:"out",data:t}),this.websocket.send(t))},e.prototype.ping=function(){this.send("2")},e.prototype.clear=function(){this.messages=[]},e.prototype.previewMessage=function(){if(this.isPreview=!0,this.isSocketIO)this.previewResult="",p.add(this.message);else try{this.previewResult=JSON.stringify(JSON.parse(this.message),null,"    ")}catch(t){this.previewResult=t}},e.prototype.cancelPreview=function(){this.isPreview=!1},e.prototype.showTips=function(){this.messages.unshift({moment:o(),type:"tips",tips:"Tips: \n1. for socket.io, if you connect 'http://localhost', in ws's perspective, you connected 'ws://localhost/socket.io/?transport=websocket'\n2. for socket.io, if you connect 'https://localhost', in ws's perspective, you connected 'wss://localhost/socket.io/?transport=websocket'\n"+'3. for socket.io, if you send a message(eg: {a_key:"a_value"}) in an event(eg: "a_event"), in ws\'s perspective, the actual message you send is: 42["a_event",{"a_key":"a_value"}]\n4. chrome\'s developer tool is a good tool to view ws connection and messages\n5. for ActiveMQ, the default url is \'ws://localhost:61614\' ,the subprotocol should be \'stomp\''})},e.prototype.close=function(){this.messages.unshift({moment:o(),type:"tips",tips:"Is going to disconnect manually."}),this.websocket.close()},e.prototype.onopen=function(t){this.messages.unshift({moment:o(),type:t.type})},e.prototype.onclose=function(t){this.messages.unshift({moment:o(),type:t.type,reason:t.reason}),this.websocket=null,clearInterval(d)},e.prototype.onmessage=function(t){if(!this.ignorePing||"3"!==t.data){if("3"===t.data)return void this.messages.unshift({moment:o(),type:t.type,data:t.data});if(this.messages.unshift({moment:o(),type:t.type,rawData:t.data,visible:void 0}),this.isSocketIOInternally)u.add(t.data);else try{var e=JSON.parse(t.data);this.messages.unshift({moment:o(),type:t.type,formattedData:JSON.stringify(e,null,"    ")})}catch(t){console.log(t)}}},e.prototype.onerror=function(t){this.messages.unshift({moment:o(),type:t.type}),this.websocket=null,clearInterval(d)},e.prototype.showMessage=function(t){this.messages[t].visible=!0},e.prototype.hideMessage=function(t){this.messages[t].visible=!1},e}(i);v=a([r.default({template:s(25)})],v);var k=new v({el:"#body"});if(WebSocket||k.messages.unshift({moment:o(),type:"tips",tips:"current browser doesn't support WebSocket"}),u.on("decoded",function(t){k.messages.unshift({moment:o(),type:"in",formattedData:JSON.stringify(t,null,"    "),visible:void 0})}),p.on("decoded",function(t){k.previewResult=JSON.stringify(t,null,"    ")}),!localStorage.getItem("tour")){var y=new Shepherd.Tour({defaults:{classes:"shepherd-theme-arrows",showCancelLink:!0}});y.addStep("input url",{title:"input url",text:"input url of your websocket services here",attachTo:".tour-input-url bottom",buttons:[{text:"Next",action:y.next}]}),y.addStep("check",{title:"check",text:"check this if you are connecting a socket.io service",attachTo:".tour-check right",buttons:[{text:"Next",action:y.next}]}),y.addStep("connect",{title:"connect",text:"press this button to connect your websocket service",attachTo:".tour-connect right",buttons:[{text:"Next",action:y.next}]}),y.addStep("input message",{title:"input message",text:"input message that is about to send",attachTo:".tour-input-message right",buttons:[{text:"Next",action:y.next}]}),y.addStep("send message",{title:"send message",text:"press this button to send the message",attachTo:".tour-send-message right",buttons:[{text:"Next",action:y.next}]}),y.addStep("view messages",{title:"view messages",text:"all the messages in and out will be here",attachTo:".tour-view-messages top",buttons:[{text:"Done",action:y.next}]}),y.start(),localStorage.setItem("tour","1")}},25:function(t,e){t.exports='<div><ul class="bookmarks list-unstyled"><li v-for="(bookmark, index) in bookmarks"><button class="btn btn-link btn-xs hint--bottom hint--rounded" @click="useBookmark(index)" data-hint="set this configuration as current configuration">{{bookmark.name}}</button> <button class="btn btn-link btn-xs hint--bottom hint--rounded" @click="deleteBookmark(index)" data-hint="delete this configuration">delete</button></li></ul><div class="main"><div class="container"><div class="row"><div class="col-md-12"><h4>WebSocket/Socket.IO/Stomp Test Tool</h4></div></div><div class="row"><div class="col-md-10 hint--bottom hint--rounded" data-hint="input url of your websocket services here"><input id="url" type="url" class="form-control tour-input-url" v-model="url"></div><div class="col-md-2 hint--bottom hint--rounded" data-hint="optional websocket subprotocol"><input type="text" class="form-control" placeholder="subprotocol" v-model="subprotocol"></div></div><div class="row"><div class="col-md-12"><label class="hint--right hint--rounded" data-hint="check this if you are connecting a socket.io service"><input type="checkbox" v-model="isSocketIO" :disabled="!!websocket" class="tour-check"> socket.io</label><label v-if="isSocketIO" class="hint--right hint--rounded" data-hint="ping/pong is like heartbeat"><input type="checkbox" v-model="ignorePing" :disabled="!!websocket"> will hide ping/pong of socket.io</label></div></div><div class="row"><div class="col-md-12"><button class="btn btn-primary btn-sm tour-connect hint--right hint--rounded" @click="connect()" :disabled="!!websocket" data-hint="press this button to connect your websocket service">connect</button> <button class="btn btn-default btn-sm tour-connect hint--right hint--rounded" @click="close()" :disabled="!websocket" data-hint="press this button to disconnect">disconnect</button> <button class="btn btn-default btn-sm clipboard hint--right hint--rounded" data-clipboard-target="#url" data-hint="press this button to copy the url to your paste board">copy URL</button> <button class="btn btn-default btn-sm" @click="addParameter()">add a parameter</button> <button class="btn btn-default btn-sm" @click="showTips()">show tips</button> <button class="btn btn-default btn-sm" @click="toggleStomp()">{{ stompIsHidden ? "show stomp" : "hide stomp"}}</button></div></div><div class="row" v-if="!stompIsHidden"><div class="col-md-12"><button class="btn btn-default btn-sm" @click="useStompConnectionMessage()">use stomp connection message</button> <button class="btn btn-default btn-sm" @click="useStompSubscriptionMessage()">use stomp subscription message</button> <button class="btn btn-default btn-sm" @click="useStompSendMessage()">use stomp send message</button></div></div><div class="row"><div class="col-md-6"><div class="col-md-12 hint--right hint--rounded" data-hint="input message that is about to send"><textarea style="width:100%;height:200px" class="form-control tour-input-message" v-model="message" v-if="!isPreview"></textarea><pre v-else>{{previewResult}}</pre></div></div><div class="col-md-6"><div v-for="(parameter, index) in parameters"><div class="col-md-3"><input type="text" class="form-control input-sm" :value="parameter.key" @keyup="setKeyOfParameter(index, $event)"></div><div class="col-md-7"><input type="text" class="form-control input-sm" :value="parameter.value" @keyup="setValueOfParameter(index, $event)"></div><div class="col-md-2"><button class="btn btn-link btn-sm hint--right hint--rounded" @click="deleteParameter(index)" data-hint="delete the parameter">delete</button></div></div></div></div><div class="row"><div class="col-md-12"><label class="hint--right hint--rounded" data-hint="show raw string of the messages"><input type="checkbox" v-model="showRaw"> show raw data</label><label class="hint--right hint--rounded" data-hint="show formatted string of the messages"><input type="checkbox" v-model="showFormatted"> show formatted data</label></div></div><div class="row"><div class="col-md-12"><button class="btn btn-default btn-sm hint--right hint--rounded" @click="previewMessage()" :disabled="message===\'\'" v-if="!isPreview" data-hint="preview the message to check format">preview message</button> <button class="btn btn-default btn-sm hint--right hint--rounded" @click="cancelPreview()" :disabled="message===\'\'" v-else data-hint="cancel the preview of the message">cancel preview</button> <button class="btn btn-primary btn-sm tour-send-message hint--right hint--rounded" @click="sendMessage()" :disabled="!websocket" data-hint="press this button to send the message">send message</button> <button class="btn btn-default btn-sm hint--right hint--rounded" @click="clear()" :disabled="messages.length===0" data-hint="press this button to clear all the messages below">clear</button> <button class="btn btn-default btn-sm" @click="savingAsBookmark()">{{isEditing ? "cancel bookmark" : "save as bookmark"}}</button> <button class="btn btn-default btn-sm" @click="toggleFilter()">{{filterIsHidden ? "show filter" : "hide filter"}}</button></div></div><div class="row" v-if="isEditing"><div class="col-md-4 hint--right hint--rounded" data-hint="input the bookmark name"><input id="bookmarkName" type="text" class="form-control input-sm" v-model="bookmarkName"></div><div class="col-md-2"><button class="btn btn-link btn-sm" @click="saveAsBookmark()" :disabled="!canSaveAsBookmark">save</button></div></div><div class="row" v-if="!filterIsHidden"><div class="col-md-6"><input id="filter" type="text" class="form-control input-sm" v-model="filter"></div></div><div class="row"><div class="col-md-12 tour-view-messages"><ul v-for="(message, index) in filteredMessages"><li><span class="label label-default">{{message.moment}}</span> <span v-if="message.type===\'open\'" class="label label-success">open</span> <span v-if="message.type===\'close\'" class="label label-danger">close</span> <span v-if="message.type===\'error\'" class="label label-danger">error</span> <span v-if="message.type===\'out\'" class="label label-info">out</span> <span v-if="message.type===\'in\'" class="label label-info">in</span> <span v-if="message.type===\'tips\'" class="label label-info">tips</span> <span v-if="message.reason">{{message.reason}}</span> <span v-if="message.data">{{message.data}}</span> <span v-if="message.formattedData"><template v-if="message.visible !== undefined ? message.visible : showFormatted"><button class="btn btn-xs btn-default" @click="hideMessage(index)">hide</button><pre>{{message.formattedData}}</pre><button class="btn btn-xs btn-default" @click="hideMessage(index)">hide</button></template><template v-else><label class="label label-default">formatted</label><button class="btn btn-xs btn-default" @click="showMessage(index)">show</button></template></span><span v-if="message.rawData"><template v-if="message.visible !== undefined ? message.visible : showRaw"><button class="btn btn-xs btn-default" @click="hideMessage(index)">hide</button><pre>{{message.rawData}}</pre><button class="btn btn-xs btn-default" @click="hideMessage(index)">hide</button></template><template v-else><label class="label label-default">raw</label><button class="btn btn-xs btn-default" @click="showMessage(index)">show</button></template></span><pre v-if="message.tips">{{message.tips}}</pre></li></ul></div></div></div></div></div>'}});